{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Build a custom authentication system using email + password with signup and login, storing user accounts securely in a Motoko backend canister (replacing Internet Identity / OTPless).",
  "architectural_notes": [
    "Use Motoko backend canister to store user accounts with securely hashed passwords (no plaintext).",
    "Replace existing Internet Identity/OTPless login UI flow with custom email+password signup/login screens."
  ],
  "known_issues": [
    "Previous attempt to implement email+password signup/login failed to build/deploy; needs retry."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-replace-the-existing-internet-identity-based-login-modal-ui-with-an-email-password-authentication-modal-that-supports-both-signup-and-login-and-integrate-it-into-frontend-src-components-timerscreen-tsx-so-it-still-a-auto-opens-on-first-visit-for-unauthenticated-users-and-b-can-be-opened-via-the-existing-header-login-icon",
      "title": "Replace the existing Internet Identity-based login modal UI with an email/password authentication modal that supports both signup and login, and integrate it into `frontend/src/components/TimerScreen.tsx` so it still (a) auto-opens on first visit for unauthenticated users and (b) can be opened via the existing header login icon.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-new-frontend-authentication-state-layer-new-hook-provider-for-email-password-auth-that-stores-the-session-token-locally-exposes-signup-login-and-logout-actions-and-exposes-isauthenticated-current-user-info-to-the-ui-without-relying-on-useinternetidentity-for-application-logic",
      "title": "Implement a new frontend authentication state layer (new hook/provider) for email/password auth that stores the session token locally, exposes `signup`, `login`, and `logout` actions, and exposes `isAuthenticated` + current user info to the UI without relying on `useInternetIdentity` for application logic.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement custom email+password authentication: user signup and future login, with accounts stored securely (hashed passwords) in Motoko backend canister; update UI to use this instead of Internet Identity/OTPless.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement a custom email + password authentication system in the Motoko backend canister, supporting user signup and future login with securely stored credentials (store a per-user salt + password hash; never store plaintext passwords).",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add backend session management for the custom auth system so the frontend can remain logged in across page refreshes using a backend-issued session token, with methods to get the current authenticated user from a token and to log out (invalidate the token).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Replace Internet Identity flow with custom email/password signup + login (Motoko-backed)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}